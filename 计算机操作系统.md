# 计算机操作系统



## work 1

> 简述脱机批处理系统的工作流程

1. 提交。程序员将写好的程序，以及程序运行所需要的数据和作业说明书写好后交给操作员。操作员收到一定数量的作业或等待一段时间后把这些作业进行整理组织后形成若干的作业流后准备启动输入计算机。
2. 后备。操作员启动输入计算机。输入计算机控制读卡机读取所有的作业的卡片信息，再控制磁带机将作业信息转存到磁带上。在一批作业全部读入或写入磁带后，操作员将输入计算机关闭，取下磁带，并手工将磁带装入主计算机中。
3. 执行。操作员启动主计算机。主计算机的操作系统的作业调度程序选取磁带上的若干作业存入到主计算机的内存并运行。如果在作业运行的过程中出现错误，由操作员记录这些错误，并在整理后反馈给程序员。程序员得到反馈后可根据需要修改程序并再次提交。作业运行的过程中，如果有输出数据，系统就会将是输出数据存储到另一个磁带上，当主计算机上的所有作业的全部程序执行完毕后，操作员关闭主计算机，手工将含有输出数据的磁带取下放入输出计算机中。
4. 完成。操作员启动输出计算机。输出计算机读取磁带上的数据并送到打印机上输出。





> 简述系统调用的过程

1. 放置调用号标识，传入函数的参数信息。
2. 访管指令：发出表示系统调用请求的中断(软中断、陷阱)。
3. 处理器保护程序现场，转向中断处理(内核态)。
4. 中断处理程序识别中断为系统调用请求，于是转向内核的访管指令处理程序。
5. 访管处理程序在入口地址表中查找调用标识号对应的内核中的子程序的入口地址。
6. 从查找到的入口地址开始执行内核子程序并得到结果。
7. 回复应用程序现场，返回用户态(目态)。



## work2

3.什么是进程？进程有哪些特征？

进程：一道程序在一个数据集上的一次执行过程。(程序的运行过程称为任务)

特征：

（1）动态性：每个进程都有一个生命周期，具有一个从创建、运行到消亡的过程。

（2）并发性：多个进程可以并发执行。一个进程被创建后，在他消亡之前，其他进程也可以被创建。基于单核处理器的系统，在微观上多个进程轮流交替地在处理器上运行。

（3）独立性：一个进程的程序和数据只能由这个进程本身访问(进程的地址空间是私有的)

（4）结构性：一个进程可以用相对固定的数据结构表示。不同的进程具有相同的属性，操作系统通过概括、抽象，定义了一个相对固定的数据结构来表示某一个进程。这个数据结构就是进程控制块PCB。

（5）异步性：一个或多个进程可以被操作系统随时创建。由于进程的运行过程不可预知，那么这些进程何时运行完成也不可预知。因此操作系统需要具备随时创建一个或多个新的进程的能力。



4.进程的三个基本状态是什么？请画出它们之间的转换关系

三个基本状态：就绪，运行，阻塞。

![](D:\MyCode\MarkDown\IMG\三态关系.jpg)

6.什么是临界资源？什么是临界区？

临界资源：从某一进程对资源进行申请、使用到最后退还的过程中只能让这一个进程使用，如果同时让多个进程使用这个资源就很可能会导致结果出错的资源。

临界区：进程对应的程序中对需使用的临界资源进行申请，使用到退还为止的一段代码。





## work3

课后练习10.

```c
/*
初始化:
r=1;
w1=w2=0
*/
R(){
    p(r);
    //从输入读入一个整数存入B;
    if(B&0b1==1) v(w1);
    else v(w2);
}
W1(){
    p(w1);
    //将值从B中取出打印;
    v(r);
}
W2(){
    p(w2);
    //将值从B中取出打印;
    v(r);
}

```



![](D:\MyCode\MarkDown\IMG\pc1.jpg)

课后练习11.

```c
/*
初始化:
r1=r2=1;
d=s=0;
c=1;
*/
R(){
    p(r1);
    p(r2);
    //读一组数据进入buf缓冲区;
    v(d);
    v(s);
}
D(){
    p(d);
    p(c);
    //取出buf缓冲区的数据并在屏幕上显示;
    v(c);
    v(r1);
}
S(){
    p(s);
    p(c);
    //取出buf缓冲区的数据并保存到磁盘上;
    v(c);
    v(r2);
}
```

![](D:\MyCode\MarkDown\IMG\pc2.jpg)